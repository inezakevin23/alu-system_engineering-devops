#!/usr/bin/env bash
# Configures Nginx to include a custom HTTP header with the hostname

# Install Nginx if not already installed
apt-get update -y
apt-get install -y nginx

# Get the server's hostname
hostname_value=$(hostname)

# Add custom header to Nginx default configuration
sed -i "/listen 80 default_server;/a \\tadd_header X-Served-By \"$hostname_value\";" /etc/nginx/sites-available/default

# Restart Nginx to apply changes
systemctl restart nginx
